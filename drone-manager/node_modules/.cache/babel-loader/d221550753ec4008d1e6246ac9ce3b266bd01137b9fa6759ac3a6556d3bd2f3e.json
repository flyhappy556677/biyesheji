{"ast":null,"code":"import request from '@/utils/request';\nimport Cookies from 'js-cookie';\nexport default {\n  name: 'detail',\n  data() {\n    return {\n      user: '',\n      drone: {},\n      form: {},\n      rules: {\n        droneName: [{\n          required: true,\n          message: '请输入无人机名称',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  created() {\n    const id = this.$route.query.id;\n    request.get('/drone/' + id).then(res => {\n      this.drone = res.data;\n      // 使用this.$set确保Vue能够正确地追踪这些属性的变化\n      this.$set(this.form, 'droneNo', this.drone.droneNo);\n      this.$set(this.form, 'droneName', this.drone.name);\n      this.$set(this.form, 'score', this.drone.score);\n      // ... 其他设置表单值的逻辑\n    });\n    const user = Cookies.get('user') ? JSON.parse(Cookies.get('user')) : {};\n    console.log(user);\n    this.form = {\n      userId: user.id,\n      // 添加用户id\n      userName: user.username,\n      // 添加用户名称\n      userPhone: user.phone // 添加用户电话\n    };\n    console.log(this.form);\n  },\n  methods: {\n    save() {\n      this.$refs['ruleForm'].validate(valid => {\n        if (valid) {\n          request.post('/order/save', this.form).then(res => {\n            console.log(this.form);\n            if (res.code === '200') {\n              this.$notify.success('新增成功');\n              this.$refs['ruleForm'].resetFields();\n            } else {\n              this.$notify.error(res.msg);\n            }\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["request","Cookies","name","data","user","drone","form","rules","droneName","required","message","trigger","created","id","$route","query","get","then","res","$set","droneNo","score","JSON","parse","console","log","userId","userName","username","userPhone","phone","methods","save","$refs","validate","valid","post","code","$notify","success","resetFields","error","msg"],"sources":["src/views/Detail.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h2>增加购买记录</h2>\r\n    <el-form :model=\"form\" :rules=\"rules\" ref=\"ruleForm\" :inline=\"true\" style=\"width: 70%\" label-width=\"100px\">\r\n\r\n      <el-form-item label=\"无人机编号\" prop=\"droneNo\">\r\n        <el-input v-model=\"form.droneNo\" disabled placeholder=\"请输入所需编号\"></el-input>\r\n      </el-form-item>\r\n\r\n\r\n      <el-form-item label=\"无人机名称\" prop=\"droneName\">\r\n        <el-input v-model=\"form.droneName\" disabled placeholder=\"请输入无人机名称\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"所需积分\" prop=\"score\">\r\n        <el-input v-model=\"form.score\" disabled placeholder=\"请输入所需积分\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"用户ID\" prop=\"userId\">\r\n        <el-input v-model=\"form.userId\" disabled placeholder=\"请输入用户名称\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"用户名称\" prop=\"userName\">\r\n        <el-input v-model=\"form.userName\" disabled placeholder=\"请输入用户名称\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"用户联系方式\" prop=\"userPhone\">\r\n        <el-input v-model=\"form.userPhone\" disabled placeholder=\"请输入用户联系方式\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"购买时间\" prop=\"buytime\">\r\n        <el-date-picker\r\n            v-model=\"form.createtime\"\r\n            type=\"date\"\r\n            value-format=\"yyyy-MM-dd\"\r\n            placeholder=\"请输入创造时间\">\r\n        </el-date-picker>\r\n      </el-form-item>\r\n\r\n    </el-form>\r\n\r\n    <div style=\"text-align:center; margin: top 30px;\">\r\n      <el-button type=\"primary\" @click=\"save\">提交</el-button>\r\n      <el-button type=\"danger\">取消</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from '@/utils/request';\r\nimport Cookies from  'js-cookie';\r\nexport default {\r\n  name:'detail',\r\n  data(){\r\n\r\n    return{\r\n      user:'',\r\n      drone:{},\r\n      form:{},\r\n      rules:{\r\n        droneName:[\r\n          {required:true, message:'请输入无人机名称',trigger:'blur'},\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  created(){\r\n    const id=this.$route.query.id\r\n\r\n    request.get('/drone/'+id).then(res =>{\r\n      this.drone =res.data\r\n      // 使用this.$set确保Vue能够正确地追踪这些属性的变化\r\n      this.$set(this.form, 'droneNo', this.drone.droneNo);\r\n      this.$set(this.form, 'droneName', this.drone.name);\r\n      this.$set(this.form, 'score', this.drone.score);\r\n      // ... 其他设置表单值的逻辑\r\n    })\r\n    const user = Cookies.get('user') ? JSON.parse(Cookies.get('user')) : {};\r\n    console.log(user)\r\n    this.form = {\r\n      userId: user.id, // 添加用户id\r\n      userName: user.username, // 添加用户名称\r\n      userPhone: user.phone // 添加用户电话\r\n    };\r\n    console.log(this.form)\r\n  },\r\n  methods:{\r\n    save(){\r\n      this.$refs['ruleForm'].validate((valid) => {\r\n        if(valid){\r\n          request.post('/order/save',this.form).then(res =>{\r\n            console.log(this.form)\r\n            if(res.code ==='200'){\r\n              this.$notify.success('新增成功')\r\n              this.$refs['ruleForm'].resetFields()\r\n            }else{\r\n              this.$notify.error(res.msg)\r\n\r\n            }\r\n          })\r\n\r\n        }\r\n      })\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"mappings":"AAiDA,OAAAA,OAAA;AACA,OAAAC,OAAA;AACA;EACAC,IAAA;EACAC,KAAA;IAEA;MACAC,IAAA;MACAC,KAAA;MACAC,IAAA;MACAC,KAAA;QACAC,SAAA,GACA;UAAAC,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAC,QAAA;IACA,MAAAC,EAAA,QAAAC,MAAA,CAAAC,KAAA,CAAAF,EAAA;IAEAb,OAAA,CAAAgB,GAAA,aAAAH,EAAA,EAAAI,IAAA,CAAAC,GAAA;MACA,KAAAb,KAAA,GAAAa,GAAA,CAAAf,IAAA;MACA;MACA,KAAAgB,IAAA,MAAAb,IAAA,kBAAAD,KAAA,CAAAe,OAAA;MACA,KAAAD,IAAA,MAAAb,IAAA,oBAAAD,KAAA,CAAAH,IAAA;MACA,KAAAiB,IAAA,MAAAb,IAAA,gBAAAD,KAAA,CAAAgB,KAAA;MACA;IACA;IACA,MAAAjB,IAAA,GAAAH,OAAA,CAAAe,GAAA,WAAAM,IAAA,CAAAC,KAAA,CAAAtB,OAAA,CAAAe,GAAA;IACAQ,OAAA,CAAAC,GAAA,CAAArB,IAAA;IACA,KAAAE,IAAA;MACAoB,MAAA,EAAAtB,IAAA,CAAAS,EAAA;MAAA;MACAc,QAAA,EAAAvB,IAAA,CAAAwB,QAAA;MAAA;MACAC,SAAA,EAAAzB,IAAA,CAAA0B,KAAA;IACA;IACAN,OAAA,CAAAC,GAAA,MAAAnB,IAAA;EACA;EACAyB,OAAA;IACAC,KAAA;MACA,KAAAC,KAAA,aAAAC,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACAnC,OAAA,CAAAoC,IAAA,qBAAA9B,IAAA,EAAAW,IAAA,CAAAC,GAAA;YACAM,OAAA,CAAAC,GAAA,MAAAnB,IAAA;YACA,IAAAY,GAAA,CAAAmB,IAAA;cACA,KAAAC,OAAA,CAAAC,OAAA;cACA,KAAAN,KAAA,aAAAO,WAAA;YACA;cACA,KAAAF,OAAA,CAAAG,KAAA,CAAAvB,GAAA,CAAAwB,GAAA;YAEA;UACA;QAEA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}