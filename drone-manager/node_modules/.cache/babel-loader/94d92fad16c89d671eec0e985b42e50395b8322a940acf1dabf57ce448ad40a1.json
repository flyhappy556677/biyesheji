{"ast":null,"code":"export default {\n  name: 'addMaintenance',\n  data() {\n    return {\n      user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {},\n      form: {\n        userName: '',\n        droneName: '',\n        address: '',\n        phone: '',\n        createtime: ''\n      },\n      rules: {\n        userName: [{\n          required: true,\n          message: '请输入操作用户',\n          trigger: 'blur'\n        }],\n        droneName: [{\n          required: true,\n          message: '请输入无人机名字',\n          trigger: 'blur'\n        }],\n        address: [{\n          required: true,\n          message: '请输入操作地址',\n          trigger: 'blur'\n        }],\n        phone: [{\n          required: true,\n          message: '请输入手机号码',\n          trigger: 'blur'\n        }],\n        createtime: [{\n          required: true,\n          message: '请选择保养提交时间',\n          trigger: 'change'\n        }]\n      }\n    };\n  },\n  methods: {\n    save() {\n      // 在此处添加其他字段的验证规则\n      this.$refs.ruleForm.validate(valid => {\n        if (valid) {\n          // 验证通过，执行保存逻辑\n          this.form.status = true; // 例如将 status 设置为 true\n\n          request.post('/maintenance/save', {\n            ...this.form,\n            orderId: this.$route.query.id\n          }).then(res => {\n            if (res.code === '200') {\n              this.$notify.success('更新成功');\n            } else {\n              this.$notify.error(res.msg);\n            }\n          }).catch(error => {\n            console.error('保存出错:', error);\n            this.$notify.error('保存出错，请稍后重试');\n          });\n        } else {\n          // 验证不通过，停止保存并提示用户\n          return false;\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","user","localStorage","getItem","JSON","parse","form","userName","droneName","address","phone","createtime","rules","required","message","trigger","methods","save","$refs","ruleForm","validate","valid","status","request","post","orderId","$route","query","id","then","res","code","$notify","success","error","msg","catch","console"],"sources":["src/views/addMaintenance.vue"],"sourcesContent":["<template>\r\n  <el-form :model=\"form\" :rules=\"rules\" ref=\"ruleForm\" :inline=\"true\" style=\"width: 70%\" label-width=\"100px\">\r\n\r\n    <el-form-item label=\"操作用户\" prop=\"userName\">\r\n      <el-input v-model=\"form.userName\" placeholder=\"请输入无人机名称\"></el-input>\r\n    </el-form-item>\r\n\r\n    <el-form-item label=\"无人机名字\" prop=\"droneName\">\r\n      <el-input v-model=\"form.droneName\" placeholder=\"请输入无人机名字\"></el-input>\r\n    </el-form-item>\r\n\r\n    <el-form-item label=\"操作地址\" prop=\"address\">\r\n      <el-input style=\"width:400px\" v-model=\"form.address\"  placeholder=\"请输入描述\"></el-input>\r\n    </el-form-item>\r\n\r\n    <el-form-item label=\"手机号码\" prop=\"phone\">\r\n      <el-input style=\"width:400px\" v-model=\"form.phone\"  placeholder=\"请输入描述\"></el-input>\r\n    </el-form-item>\r\n\r\n    <el-form-item label=\"保养提交时间\" prop=\"createtime\">\r\n      <el-date-picker\r\n          v-model=\"form.createtime\"\r\n          type=\"date\"\r\n          value-format=\"yyyy-MM-dd\"\r\n          placeholder=\"保养提交时间\">\r\n      </el-date-picker>\r\n    </el-form-item>\r\n\r\n    <div style=\"text-align:center; margin-top:30px;\">\r\n      <el-button type=\"primary\" @click=\"save\">提交</el-button>\r\n      <el-button type=\"danger\">取消</el-button>\r\n    </div>\r\n\r\n  </el-form>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'addMaintenance',\r\n  data() {\r\n    return {\r\n      user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {},\r\n      form: {\r\n        userName: '',\r\n        droneName: '',\r\n        address: '',\r\n        phone: '',\r\n        createtime: ''\r\n      },\r\n      rules: {\r\n        userName: [{ required: true, message: '请输入操作用户', trigger: 'blur' }],\r\n        droneName: [{ required: true, message: '请输入无人机名字', trigger: 'blur' }],\r\n        address: [{ required: true, message: '请输入操作地址', trigger: 'blur' }],\r\n        phone: [{ required: true, message: '请输入手机号码', trigger: 'blur' }],\r\n        createtime: [{ required: true, message: '请选择保养提交时间', trigger: 'change' }]\r\n      }\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    save() {\r\n      // 在此处添加其他字段的验证规则\r\n      this.$refs.ruleForm.validate((valid) => {\r\n        if (valid) {\r\n          // 验证通过，执行保存逻辑\r\n          this.form.status = true; // 例如将 status 设置为 true\r\n\r\n          request.post('/maintenance/save', { ...this.form, orderId: this.$route.query.id })\r\n              .then(res => {\r\n                if (res.code === '200') {\r\n                  this.$notify.success('更新成功');\r\n                } else {\r\n                  this.$notify.error(res.msg);\r\n                }\r\n              })\r\n              .catch(error => {\r\n                console.error('保存出错:', error);\r\n                this.$notify.error('保存出错，请稍后重试');\r\n              });\r\n        } else {\r\n          // 验证不通过，停止保存并提示用户\r\n          return false;\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n"],"mappings":"AAqCA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,IAAA,EAAAC,YAAA,CAAAC,OAAA,WAAAC,IAAA,CAAAC,KAAA,CAAAH,YAAA,CAAAC,OAAA;MACAG,IAAA;QACAC,QAAA;QACAC,SAAA;QACAC,OAAA;QACAC,KAAA;QACAC,UAAA;MACA;MACAC,KAAA;QACAL,QAAA;UAAAM,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAP,SAAA;UAAAK,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAN,OAAA;UAAAI,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAL,KAAA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAJ,UAAA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;IACA;EACA;EAEAC,OAAA;IACAC,KAAA;MACA;MACA,KAAAC,KAAA,CAAAC,QAAA,CAAAC,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA;UACA,KAAAf,IAAA,CAAAgB,MAAA;;UAEAC,OAAA,CAAAC,IAAA;YAAA,QAAAlB,IAAA;YAAAmB,OAAA,OAAAC,MAAA,CAAAC,KAAA,CAAAC;UAAA,GACAC,IAAA,CAAAC,GAAA;YACA,IAAAA,GAAA,CAAAC,IAAA;cACA,KAAAC,OAAA,CAAAC,OAAA;YACA;cACA,KAAAD,OAAA,CAAAE,KAAA,CAAAJ,GAAA,CAAAK,GAAA;YACA;UACA,GACAC,KAAA,CAAAF,KAAA;YACAG,OAAA,CAAAH,KAAA,UAAAA,KAAA;YACA,KAAAF,OAAA,CAAAE,KAAA;UACA;QACA;UACA;UACA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}