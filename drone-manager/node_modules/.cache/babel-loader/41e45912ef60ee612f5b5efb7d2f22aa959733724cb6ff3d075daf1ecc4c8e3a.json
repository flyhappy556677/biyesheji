{"ast":null,"code":"import AMapLoader from \"@amap/amap-jsapi-loader\";\nexport default {\n  name: \"map-view\",\n  data() {\n    return {\n      searchKeyword: \"\",\n      // 用于存储搜索关键字\n      map: null,\n      // 地图对象\n      placeSearch: null,\n      // 地点搜索对象\n      searchResults: [],\n      // 存储搜索结果\n      selectedResult: null // 用于绑定选择的搜索结果\n    };\n  },\n  mounted() {\n    this.initAMap();\n  },\n  unmounted() {\n    this.map?.destroy();\n  },\n  methods: {\n    async initAMap() {\n      const {\n        default: AMapLoader\n      } = await import(\"@amap/amap-jsapi-loader\");\n      AMapLoader.load({\n        key: \"f34b8d5f4cbdb16a9f986dcb3b35da8a\",\n        version: \"2.0\",\n        plugins: [\"AMap.PlaceSearch\"]\n      }).then(AMap => {\n        this.map = new AMap.Map(\"container\", {\n          resizeEnable: true\n        });\n\n        // 初始化地点搜索对象\n        this.placeSearch = new AMap.PlaceSearch({\n          pageSize: 5,\n          pageIndex: 1,\n          city: \"全国\",\n          // 可以设置为具体的城市，例如：\"北京\"\n          map: this.map,\n          panel: \"panel\",\n          autoFitView: true\n        });\n      }).catch(e => {\n        console.log(e);\n      });\n    },\n    search() {\n      // 执行地点搜索\n      if (this.placeSearch) {\n        this.placeSearch.search(this.searchKeyword, (status, result) => {\n          if (status === 'complete') {\n            this.searchResults = result.poiList.pois;\n            console.log(this.searchResults);\n          } else {\n            console.error(\"搜索失败：\" + result.info);\n          }\n        });\n      } else {\n        console.error(\"PlaceSearch对象未初始化！\");\n      }\n    }\n  }\n};","map":{"version":3,"names":["AMapLoader","name","data","searchKeyword","map","placeSearch","searchResults","selectedResult","mounted","initAMap","unmounted","destroy","methods","default","load","key","version","plugins","then","AMap","Map","resizeEnable","PlaceSearch","pageSize","pageIndex","city","panel","autoFitView","catch","e","console","log","search","status","result","poiList","pois","error","info"],"sources":["src/views/Map.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div id=\"container\"></div>\r\n    <input type=\"text\" v-model=\"searchKeyword\" placeholder=\"请输入要搜索的地点\">\r\n    <button @click=\"search\">搜索</button>\r\n    <select v-model=\"selectedResult\">\r\n      <option v-for=\"(result, index) in searchResults\" :key=\"index\" :value=\"result\" style=\"width: 100px\">\r\n        {{ result.name }}\r\n      </option>\r\n    </select>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport AMapLoader from \"@amap/amap-jsapi-loader\";\r\n\r\nexport default {\r\n  name: \"map-view\",\r\n  data() {\r\n    return {\r\n      searchKeyword: \"\", // 用于存储搜索关键字\r\n      map: null, // 地图对象\r\n      placeSearch: null, // 地点搜索对象\r\n      searchResults: [], // 存储搜索结果\r\n      selectedResult: null // 用于绑定选择的搜索结果\r\n    };\r\n  },\r\n  mounted() {\r\n    this.initAMap();\r\n  },\r\n  unmounted() {\r\n    this.map?.destroy();\r\n  },\r\n  methods: {\r\n    async initAMap() {\r\n      const { default: AMapLoader } = await import(\"@amap/amap-jsapi-loader\");\r\n\r\n      AMapLoader.load({\r\n        key: \"f34b8d5f4cbdb16a9f986dcb3b35da8a\",\r\n        version: \"2.0\",\r\n        plugins: [\"AMap.PlaceSearch\"],\r\n      })\r\n          .then((AMap) => {\r\n            this.map = new AMap.Map(\"container\", {\r\n              resizeEnable: true\r\n            });\r\n\r\n            // 初始化地点搜索对象\r\n            this.placeSearch = new AMap.PlaceSearch({\r\n              pageSize: 5,\r\n              pageIndex: 1,\r\n              city: \"全国\", // 可以设置为具体的城市，例如：\"北京\"\r\n              map: this.map,\r\n              panel: \"panel\",\r\n              autoFitView: true\r\n            });\r\n          })\r\n          .catch((e) => {\r\n            console.log(e);\r\n          });\r\n    },\r\n    search() {\r\n      // 执行地点搜索\r\n      if (this.placeSearch) {\r\n        this.placeSearch.search(this.searchKeyword, (status, result) => {\r\n          if (status === 'complete') {\r\n            this.searchResults = result.poiList.pois;\r\n            console.log(this.searchResults)\r\n          } else {\r\n            console.error(\"搜索失败：\" + result.info);\r\n          }\r\n        });\r\n      } else {\r\n        console.error(\"PlaceSearch对象未初始化！\");\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#container {\r\n  width: 100%;\r\n  height: 800px;\r\n}\r\n</style>\r\n"],"mappings":"AAcA,OAAAA,UAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,aAAA;MAAA;MACAC,GAAA;MAAA;MACAC,WAAA;MAAA;MACAC,aAAA;MAAA;MACAC,cAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,QAAA;EACA;EACAC,UAAA;IACA,KAAAN,GAAA,EAAAO,OAAA;EACA;EACAC,OAAA;IACA,MAAAH,SAAA;MACA;QAAAI,OAAA,EAAAb;MAAA;MAEAA,UAAA,CAAAc,IAAA;QACAC,GAAA;QACAC,OAAA;QACAC,OAAA;MACA,GACAC,IAAA,CAAAC,IAAA;QACA,KAAAf,GAAA,OAAAe,IAAA,CAAAC,GAAA;UACAC,YAAA;QACA;;QAEA;QACA,KAAAhB,WAAA,OAAAc,IAAA,CAAAG,WAAA;UACAC,QAAA;UACAC,SAAA;UACAC,IAAA;UAAA;UACArB,GAAA,OAAAA,GAAA;UACAsB,KAAA;UACAC,WAAA;QACA;MACA,GACAC,KAAA,CAAAC,CAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,CAAA;MACA;IACA;IACAG,OAAA;MACA;MACA,SAAA3B,WAAA;QACA,KAAAA,WAAA,CAAA2B,MAAA,MAAA7B,aAAA,GAAA8B,MAAA,EAAAC,MAAA;UACA,IAAAD,MAAA;YACA,KAAA3B,aAAA,GAAA4B,MAAA,CAAAC,OAAA,CAAAC,IAAA;YACAN,OAAA,CAAAC,GAAA,MAAAzB,aAAA;UACA;YACAwB,OAAA,CAAAO,KAAA,WAAAH,MAAA,CAAAI,IAAA;UACA;QACA;MACA;QACAR,OAAA,CAAAO,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}